<%# Home page if admin in %>
<% if !current_user.roles.find_by(name: "admin").nil? %>
    <p>You're an admin!</p>
<%# Home page if user %>
<% else %>
    <%# hero banner %>
    <div id="home-banner" class="
    flex flex-col justify-between items-center
    w-full h-96 px-24 py-9
    text-white
    ">  
        <%# call to action %>
        <div class="
        flex flex-col w-full mt-7
        ">
            <div class="text-5xl mb-5 font-semibold">Buy & sell stocks in seconds</div>
            <div class="text-lg text-gray-300 mb-5">Join the world's best beginner stock exchange</div>
            <%= link_to stocks_search_path, class: "
            flex justify-center items-center
            w-56 py-3 px-4
            text-white font-bold
            bg-green-600 hover:bg-green-700
            rounded-lg
            cursor-pointer
            transition-all duration-200
            " do %>
                Trade Now
            <% end %>
        </div>

        <%# stock tickers %>
        <div class="
        flex justify-between
        w-full
        ">
            <% @active5.each do |stock| %>
                <div class="w-2/12">
                    <div>
                        <%= stock.symbol %>
                        <span class="<%= stock.change>=0 ? "text-green-500" : "text-red-500" %>">
                            <%= stock.change_percent_s %>
                        </span>
                    </div>
                    <div>
                        <span class="text-2xl font-semibold">
                            <%= stock.latest_price %>
                        </span>
                        <span class="text-sm <%= stock.change>=0 ? "text-green-500" : "text-red-500" %>">
                            <%= stock.change %>
                        </span>
                    </div>
                    <div>
                        <span class="text-sm text-gray-300">
                            <%= number_to_currency(stock.latest_price) %>
                        </span>
                    </div>
                </div>
            <% end %>
        </div>
    </div>

    <%# news articles %>
    <div class="
    flex flex-wrap justify-evenly
    bg-white
    w-full px-24 py-9
    ">
        <% @active5.each do |stock| %>
            <% @client.news(stock.symbol, 2).each do |article| %>
                <div class="
                flex flex-col self-start
                bg-white rounded-lg shadow-md
                text-black
                w-1/4 h-96 mx-6 mb-10
                ">
                    <%= link_to article.url do %>
                        <%= image_tag article.image, class: "rounded-t-lg object-center w-full h-48 overflow-hidden object-cover" %>
                    <% end %>
                    <div class="px-8 pt-6 pb-6 text-justify">
                        <div class="text-gray-600 text-sm mb-2">
                            <%= article.datetime.strftime("%d/%m/%Y %I:%M %p") %>
                        </div>
                        <div class="font-bold mb-2">
                            <%= link_to article.url do %>
                                <%= article.headline %>
                            <% end  %>
                        </div>
                        <div class="text-sm truncate">
                            <%= article.summary %>
                        </div>
                    </div>
                </div>
            <% end %>
        <% end %>
    </div>
<% end %>
